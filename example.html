<!DOCTYPE html>
<html>
<head>
  <title></title>
</head>
<body>

<a href='/myname'>say my name</a>
<a href='/age'>age</a>
<a href='/age/again'>age again </a>
<a href='/sex/male'>i'm a male</a>

<script src='build/build.js'></script>
<script>
var route = require('transit');
route.listen('/');

function bacon(){
  console.log('I run every time.');
}

function myname(ctx, next){
  console.log('foo');
  ctx.foo = 'bar';
  setTimeout(function(){
    next();
  }, 2000);
}

function lastname(ctx, next){
  console.log(ctx.foo);
}

function age(){
  console.log('29');
}

route('*', function(ctx){
  console.log('i run all');
});

route('/age/again', function(ctx){
  console.log('age again');
});

route('/sex/:gender', function(ctx){
  console.log('sex', ctx.params.gender);
});

route('/myname', myname, lastname).out(age);
route('/age', age);
route.start();

</script>
</body>
</html>